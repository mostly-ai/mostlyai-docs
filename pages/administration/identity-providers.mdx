---
title: 'Identity providers'
description: 'MOSTLY AI supports Ping One as an identity providers.'
---

import Image from 'next/image'
import { Callout } from 'nextra/components'

# Identity providers

MOSTLY AI supports Ping One as an identity provider.

<Image
    src="/docs/docimages/administration/identity-providers/app-landing-page-with-pingone.webp"
    alt="HuggingFace - Create a Read token"
    width={800}
    height={300}
/>

## 1. Create a new Identity Provider in Keycloak

1. Log in to the Keycloak Admin Console.
2. From the drop-down in the upper left, select **mostly-generate**.
    <Image
        src="/docs/docimages/administration/switch-realm-01-select-mostly-generate.webp"
        alt="Configure PingOne as IdP - Select mostly-generate realm"
        width={350}
        height={300}
    />
3. Select **Identity Providers** from the sidebar.
4. Click **Add provider** and select **OpenID Connect v1.0**.
    <Image
        src="/docs/docimages/administration/identity-providers/01-create-new-id-provider-01-click-add-and-openid-connect-1.0.webp"
        alt="Configure PingOne as IdP - Add provide and select OpenID Connect v1.0"
        width={500}
        height={300}
    />
5. Enter **pingone** in the **Alias** field.
6. Enter **PingOne** in the **Display Name** field.
    <Callout>
    Note the rendered Redirect URI. This will be used in the PingOne configuration.
    </Callout>
7. Click **Add**.
    <Image
        src="/docs/docimages/administration/identity-providers/01-create-new-id-provider-02-configure-pingone.webp"
        alt="Configure PingOne as IdP - Configure PingOne"
        width={500}
        height={300}
    />

**What's new**

We will finish the configuration after setting up PingOne.

## 2. Create a new Application in PingOne

1. Log in to your PingOne Admin Console.
2. Click **Administrators** from the sidebar.
3. Click **Applications** and then again **Applications** from the sidebar.
4. Click on **Plus** icon next to the **Application** title.
    <Image
        src="/docs/docimages/administration/identity-providers/02-create-pingone-app-01-click-plus-button.webp"
        alt="Create a PingOne application - Click Plus button"
        width={500}
        height={300}
    />
4. Enter **Application Name** and **Description**. Optionally, upload and icon.
5. Select the **OIDC Web App** card as the application type.
6. Click **Save**.
    <Image
        src="/docs/docimages/administration/identity-providers/02-create-pingone-app-02-configure-app-and-save.webp"
        alt="Create a PingOne application - Click Plus button"
        width={800}
        height={300}
    />

**Result**

The application is created and PingOne shows its details.

**What's next**

Take record of the **Client ID**, **Client Secret**, and **Authorization URL**. All three are needed for the Keycloak configuration.

<Image
    src="/docs/docimages/administration/identity-providers/02-create-pingone-app-03-result-copy-details.webp"
    alt="Create a PingOne application - Click Plus button"
    width={800}
    height={300}
/>

## 3. Configure the Keycloak Identity Provider

1. Navigate back to the **Ping One** Identity Provider configuration in Keycloak Admin Console.
2. Paste the **Authorization URL** from the PingOne configuration into the **Authorization URL** field. This will automatically populate the **Token URL**, **User Info URL** and such fields.
3. Select **Client secret sent as basic auth** under **Client Authentication**.
4. Paste the **Client ID** and **Client Secret** from the PingOne configuration into the **Client ID** and **Client Secret** fields.
5. Enable **Trust Email**

## 4 Configure the PingOne Application

1. Navigate back to **Application** on the PingOne Admin Console.
2. Under the **Configuration** tab scroll down to **OIDC Settings** and select **Client Secret Basic** as the **Token Auth method**. The method selected here must match the method selected in the Keycloak configuration.
3. For **Signoff URLs** you may set the URL to redirect to after the user logs out of the application. For example: `https://<KEYCLOAK_HOST>/auth/realms/<KEYCLOAK_REALM>/broker/<IDP_ALIAS>/endpoint/logout_response`

## 5. Configure PingOne Application's Attribute Mappings

1. Navigate back to **Application** on the PingOne Admin Console.
2. Select **Attribute Mappings** in the top bar.
3. Click on the Edit symbol next to **Custom Attributes**.
4. Add the following mappings as a minimum:
    - **sub** -> **User ID**
    - **email** -> **Email Address**
    - **given_name** -> **Given Name**
    - **family_name** -> **Family Name**
5. Click **Save**.

## 6. Configure PingOne Application's Scopes

1. Navigate back to **Application** on the PingOne Admin Console.
2. Select **Resources** in the top bar.
3. Click on the Edit symbol next to **Allowed Scopes**.
4. Add the following scopes as a minimum:
    - **openid**
    - **profile**
    - **email**

## 7. Configure Keycloak Identity Provider's Attribute Mappings

1. Navigate back to the **Ping One** Identity Provider configuration in Keycloak Admin Console.
2. Select **Mappers** in the top bar.
3. Click on the **Add mapper** button and add the following mappings as a minimum:
    1. Name: Username
       Sync Mode override: Force
       Mapper type: Username Template Importer
       Template: `${ALIAS}.${CLAIM.email}`
       Target: Local
    2. Name: Email
       Sync Mode override: Force
       Mapper type: Attribute Importer
       Claim: email
       User Attribute Name: email
    3. Name: First Name
       Sync Mode override: Force
       Mapper type: Attribute Importer
       Claim: given_name
       User Attribute Name: firstName
    4. Name: Last Name
       Sync Mode override: Force
       Mapper type: Attribute Importer
       Claim: family_name
       User Attribute Name: lastName